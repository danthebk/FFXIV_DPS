<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Home</title>

    <!-- scripts -->
    <script src="Scripts/jquery-3.5.1.js"></script>
    <script src="Scripts/angular.min.js"></script>

    <!-- bootstrap -->
    <link href="/boostrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <script src="boostrap/js/bootstrap.min.js"></script>

    <!-- content -->
    <script src="Scripts/dps.js"></script>
    <script src="Scripts/main.js"></script>
    <link href="/Content/main.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div data-ng-app="dps_app" data-ng-controller="dps_controller" data-ng-init="dps_app_init()">
        <!-- --------------------------------------------------------------------- -->
        <!-- help -->
        <!-- --------------------------------------------------------------------- -->
        <div class="accordion" id="help_accordion">
            <div class="card">
                <div class="card-header" role="tab" id="help_heading">
                    <h2 class="mb-0">
                        <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-parent="#help_accordion" href="#help_collapse" aria-controls="collapse">
                            Help
                        </button>
                    </h2>
                </div>
                <div id="help_collapse" class="collapse" role="tabpanel" aria-labelledby="help_heading">
                    <ul>
                        <li>
                            Background Colors
                            <ul>
                                <li class="{{ui_color.info}}">
                                    An information field. These are values that do not change with gear and are constants at level 80.
                                </li>
                                <li class="{{ui_color.better}}">
                                    A higher value.
                                </li>
                                <li class="{{ui_color.neutral}}">
                                    An equal or neutral value.
                                </li>
                                <li class="{{ui_color.worse}}">
                                    A lower value.
                                </li>
                            </ul>
                        </li>
                        <li>
                            Stats
                            <ul>
                                <li>
                                    Delta - The difference between the gear stats and the character's base stats. At level 80, stats have a base value of 380 (340 for determination) which determines the default stats.
                                </li>
                            </ul>
                        </li>
                        <li>
                            Materia
                            <ul>
                                <li>
                                    <button id="btnAddMateriaHelp" class="btn btn-sm btn-primary btnMateria">
                                        +
                                    </button>
                                    - adds the selected materia.
                                </li>
                                <li>
                                    <button id="btnSubtractMateriaHelp" class="btn btn-sm btn-primary btnMateria">
                                        -
                                    </button>
                                    - subtracts the selected materia.
                                </li>
                            </ul>
                        </li>
                        <li>
                            Buttons
                            <ul>
                                <li>
                                    Archive - Stores the current stats for comparison.
                                </li>
                                <li>
                                    Revert - Sets the current stats to the values stored in the archive.
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <br />

        <!-- --------------------------------------------------------------------- -->
        <!-- main -->
        <!-- --------------------------------------------------------------------- -->
        <table class="table table-bordered table-sm">
            <tr>
                <td>
                    <span>Critical Hit Materia</span><br />
                    <button id="btnCriticalAdd" class="btn btn-sm btn-primary btnMateria" ng-click="materia_add(stats_indexes.critical)">
                        +
                    </button>
                    <select id="cmbCriticalHit" class="form-control-sm" ng-model="dps_materia_selected.critical" ng-options="x.value as x.tier for x in dps_materia">
                    </select>
                    <button id="btnCriticalSubtract" class="btn btn-sm btn-primary btnMateria" ng-click="materia_subtract(stats_indexes.critical)">
                        -
                    </button>
                </td>
                <td class="{{ui.critical_main}}">
                    <span>Critical Hit</span><br />
                    <input type="number" class="form-control-sm" data-ng-change="stats_change()" data-ng-model="dps_stats.critical" value="" id="txtCriticalHit" />
                </td>
                <td class="{{ui.critical_main}}">
                    <span>Critical Hit Delta</span><br />
                    <span>{{dps_stats.criticalDelta}}</span>
                </td>
                <td class="{{ui_color.info}}">
                    <span>per .1% rate+dmg</span><br />
                    <span>{{dps_base.criticalRatio}}</span>
                </td>
                <td>
                    <span>Rate</span><br />
                    <span class="{{ui_color.info}}">{{dps_base.criticalBaseRate}}%</span> + <span class="{{ui.critical_main}}">{{dps_stats.criticalRate.toFixed(2)}}%</span>
                </td>
                <td>
                    <span>Damage</span><br />
                    <span class="{{ui_color.info}}">{{dps_base.criticalBaseDamage}}</span> + <span class="{{ui.critical_main}}">{{dps_stats.criticalDamage.toFixed(2)}}</span>
                </td>
                <td class="{{ui.critical_main}}">
                    <span>Critical Hit DPS</span><br />
                    <span>{{dps_stats.criticalDPS.toFixed(2)}}%</span>
                </td>
            </tr>
            <tr>
                <td>
                    <span>Determination Materia</span><br />
                    <button id="btnDeterminationAdd" class="btn btn-sm btn-primary btnMateria" ng-click="materia_add(stats_indexes.determination)">
                        +
                    </button>
                    <select id="cmbDetermination" class="form-control-sm" ng-model="dps_materia_selected.determination" ng-options="x.value as x.tier for x in dps_materia">
                    </select>
                    <button id="btnDeterminationSubtract" class="btn btn-sm btn-primary btnMateria" ng-click="materia_subtract(stats_indexes.determination)">
                        -
                    </button>
                </td>
                <td class="{{ui.determination_main}}">
                    <span>Determination</span><br />
                    <input type="number" class="form-control-sm" data-ng-change="stats_change()" data-ng-model="dps_stats.determination" value="" id="txtDetermination" />
                </td>
                <td class="{{ui.determination_main}}">
                    <span>Determination Delta</span><br />
                    <span>{{dps_stats.determinationDelta}}</span>
                </td>
                <td class="{{ui_color.info}}">
                    <span>per .1% dps</span><br />
                    <span>{{dps_base.determinationRatio}}</span>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td class="{{ui.determination_main}}">
                    <span>Determination DPS</span><br />
                    <span>{{dps_stats.determinationDPS.toFixed(2)}}%</span>
                </td>
            </tr>
            <tr>
                <td>
                    <span>Direct Hit Materia</span><br />
                    <button id="btnDirectHitAdd" class="btn btn-sm btn-primary btnMateria" ng-click="materia_add(stats_indexes.directhit)">
                        +
                    </button>
                    <select id="cmbDirectHit" class="form-control-sm" ng-model="dps_materia_selected.directhit" ng-options="x.value as x.tier for x in dps_materia">
                    </select>
                    <button id="btnDirectHitSubtract" class="btn btn-sm btn-primary btnMateria" ng-click="materia_subtract(stats_indexes.directhit)">
                        -
                    </button>
                </td>
                <td class="{{ui.directhit_main}}">
                    <span>Direct Hit</span><br />
                    <input type="number" class="form-control-sm" data-ng-change="stats_change()" data-ng-model="dps_stats.directhit" value="" id="txtDirectHit" />
                </td>
                <td class="{{ui.directhit_main}}">
                    <span>Direct Hit Delta</span><br />
                    <span>{{dps_stats.directhitDelta}}</span>
                </td>
                <td class="{{ui_color.info}}">
                    <span>per .1% rate</span><br />
                    <span>{{dps_base.directhitRatio}}</span>
                </td>
                <td class="{{ui.directhit_main}}">
                    <span>Rate</span><br />
                    <span>{{dps_stats.directhitRate.toFixed(0)}}%</span>
                </td>
                <td class="{{ui_color.info}}">
                    <span>Damage</span><br />
                    <span>{{dps_base.directhitBaseDamage}}</span>
                </td>
                <td class="{{ui.directhit_main}}">
                    <span>Direct Hit DPS</span><br />
                    <span>{{dps_stats.directhitDPS.toFixed(2)}}%</span>
                </td>
            </tr>
            <tr>
                <td>
                    <span>Skill/Spell Speed Materia</span><br />
                    <button id="btnSkillSpeedAdd" class="btn btn-sm btn-primary btnMateria" ng-click="materia_add(stats_indexes.skillspeed)">
                        +
                    </button>
                    <select id="cmbSkillSpeed" class="form-control-sm" ng-model="dps_materia_selected.skillspeed" ng-options="x.value as x.tier for x in dps_materia">
                    </select>
                    <button id="btnSkillSpeedSubtract" class="btn btn-sm btn-primary btnMateria" ng-click="materia_subtract(stats_indexes.skillspeed)">
                        -
                    </button>
                </td>
                <td class="{{ui.skillspeed_main}}">
                    <span>Skill/Spell Speed</span><br />
                    <input type="number" class="form-control-sm" data-ng-change="stats_change()" data-ng-model="dps_stats.skillspeed" value="" id="txtSkillSpeed" />
                </td>
                <td class="{{ui.skillspeed_main}}">
                    <span>Skill/Spell Speed Delta</span><br />
                    <span>{{dps_stats.skillspeedDelta}}</span>
                </td>
                <td class="{{ui_color.info}}">
                    <span>Base Delay</span><br />
                    <span>{{dps_base.skillspeedBase}}</span>
                </td>
                <td class="{{ui.skillspeed_main}}">
                    <span>Adjusted Delay</span><br />
                    <span>{{dps_stats.skillspeedDelay}}</span>
                </td>
                <td>
                </td>
                <td class="{{ui.skillspeed_main}}">
                    <span>Skill/Spell Speed DPS</span><br />
                    <span>{{dps_stats.skillspeedDPSImprovement.toFixed(2)}}%</span>
                </td>
            </tr>
            <tr>
                <td>
                    <span>Tenacity Materia</span><br />
                    <button id="btnTenacityAdd" class="btn btn-sm btn-primary btnMateria" ng-click="materia_add(stats_indexes.tenacity)">
                        +
                    </button>
                    <select id="cmbTenacity" class="form-control-sm" ng-model="dps_materia_selected.tenacity" ng-options="x.value as x.tier for x in dps_materia">
                    </select>
                    <button id="btnTenacitySubtract" class="btn btn-sm btn-primary btnMateria" ng-click="materia_subtract(stats_indexes.tenacity)">
                        -
                    </button>
                </td>
                <td class="{{ui.tenacity_main}}">
                    <span>Tenacity</span><br />
                    <input type="number" class="form-control-sm" data-ng-change="stats_change()" data-ng-model="dps_stats.tenacity" value="" id="txtTenacity" />
                </td>
                <td class="{{ui.tenacity_main}}">
                    <span>Tenacity Delta</span><br />
                    <span>{{dps_stats.tenacityDelta}}</span>
                </td>
                <td class="{{ui_color.info}}">
                    <span>per .1% dps</span><br />
                    <span>{{dps_base.tenacityRatio}}</span>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td class="{{ui.tenacity_main}}">
                    <span>Tenacity DPS</span><br />
                    <span>{{dps_stats.tenacityDPS.toFixed(2)}}%</span>
                </td>
            </tr>
            <tr>
                <td>
                </td>
                <td>
                </td>
                <td class="{{ui_color.info}}">
                    <span>Base Stats: {{dps_base.levelBase}}</span> <br />
                    <span>Determination: 340</span>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td class="{{ui.total_main}}">
                    <span>Total DPS</span><br />
                    <span>{{dps_stats.totaldps.toFixed(2)}}%</span>
                </td>
            </tr>
            <!-- --------------------------------------------------------------------- -->
            <!-- buttons -->
            <!-- --------------------------------------------------------------------- -->
            <tr>
                <td>
                    <button class="btn btn-primary form-control btnArchive" data-ng-click="archive_save()">
                        Archive
                    </button>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td>
                    <button class="btn btn-primary form-control btnArchive" data-ng-click="archive_revert()">
                        Revert
                    </button>
                </td>
            </tr>
            <!-- --------------------------------------------------------------------- -->
            <!-- archive -->
            <!-- --------------------------------------------------------------------- -->
            <tr>
                <td class="{{ui.critical_archive}}">
                    <span>Critical Hit Difference</span> <br />
                    <span>{{dps_stats.critical - dps_stats_archive.critical}}</span>
                </td>
                <td class="{{ui.critical_archive}}">
                    <span>Critical Hit</span><br />
                    <span>{{dps_stats_archive.critical}}</span>
                </td>
                <td class="{{ui.critical_archive}}">
                    <span>Critical Hit Delta</span><br />
                    <span>{{dps_stats_archive.criticalDelta}}</span>
                </td>
                <td class="{{ui_color.info}}">
                    <span>per .1% rate+dmg</span><br />
                    <span>{{dps_base.criticalRatio}}</span>
                </td>
                <td>
                    <span>Rate</span><br />
                    <span class="{{ui_color.info}}">{{dps_base.criticalBaseRate}}%</span> + <span class="{{ui.critical_archive}}">{{dps_stats_archive.criticalRate.toFixed(2)}}%</span>
                </td>
                <td>
                    <span>Damage</span><br />
                    <span class="{{ui_color.info}}">{{dps_base.criticalBaseDamage}}</span> + <span class="{{ui.critical_archive}}">{{dps_stats_archive.criticalDamage.toFixed(2)}}</span>
                </td>
                <td class="{{ui.critical_archive}}">
                    <span>Critical Hit DPS</span><br />
                    <span>{{dps_stats_archive.criticalDPS.toFixed(2)}}%</span>
                </td>
            </tr>
            <tr>
                <td class="{{ui.determination_archive}}">
                    <span>Determination Difference</span> <br />
                    <span>{{dps_stats.determination - dps_stats_archive.determination}}</span>
                </td>
                <td class="{{ui.determination_archive}}">
                    <span>Determination</span><br />
                    <span>{{dps_stats_archive.determination}}</span>
                </td>
                <td class="{{ui.determination_archive}}">
                    <span>Determination Delta</span><br />
                    <span>{{dps_stats_archive.determinationDelta}}</span>
                </td>
                <td class="{{ui_color.info}}">
                    <span>per .1% dps</span><br />
                    <span>{{dps_base.determinationRatio}}</span>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td class="{{ui.determination_archive}}">
                    <span>Determination DPS</span><br />
                    <span>{{dps_stats_archive.determinationDPS.toFixed(2)}}%</span>
                </td>
            </tr>
            <tr>
                <td class="{{ui.directhit_archive}}">
                    <span>Direct Hit Difference</span> <br />
                    <span>{{dps_stats.directhit - dps_stats_archive.directhit}}</span>
                </td>
                <td class="{{ui.directhit_archive}}">
                    <span>Direct Hit</span><br />
                    <span>{{dps_stats_archive.directhit}}</span>
                </td>
                <td class="{{ui.directhit_archive}}">
                    <span>Direct Hit Delta</span><br />
                    <span>{{dps_stats_archive.directhitDelta}}</span>
                </td>
                <td class="{{ui_color.info}}">
                    <span>per .1% rate</span><br />
                    <span>{{dps_base.directhitRatio}}</span>
                </td>
                <td class="{{ui.directhit_archive}}">
                    <span>Rate</span><br />
                    <span>{{dps_stats_archive.directhitRate}}%</span>
                </td>
                <td class="{{ui_color.info}}">
                    <span>Damage</span><br />
                    <span>{{dps_base.directhitBaseDamage}}</span>
                </td>
                <td class="{{ui.directhit_archive}}">
                    <span>Direct Hit DPS</span><br />
                    <span>{{dps_stats_archive.determinationDPS.toFixed(2)}}%</span>
                </td>
            </tr>
            <tr>
                <td class="{{ui.skillspeed_archive}}">
                    <span>Skill/Spell Speed Difference</span> <br />
                    <span>{{dps_stats.skillspeed - dps_stats_archive.skillspeed}}</span>
                </td>
                <td class="{{ui.skillspeed_archive}}">
                    <span>Skill/Spell Speed</span><br />
                    <span>{{dps_stats_archive.skillspeed}}</span>
                </td>
                <td class="{{ui.skillspeed_archive}}">
                    <span>Skill/Spell Speed Delta</span><br />
                    <span>{{dps_stats_archive.skillspeedDelta}}</span>
                </td>
                <td class="{{ui_color.info}}">
                    <span>Base Delay</span><br />
                    <span>{{dps_base.skillspeedBase}}</span>
                </td>
                <td class="{{ui.skillspeed_archive}}">
                    <span>Adjusted Delay</span><br />
                    <span>{{dps_stats_archive.skillspeedDelay}}</span>
                </td>
                <td>
                </td>
                <td class="{{ui.skillspeed_archive}}">
                    <span>Skill/Spell Speed DPS</span><br />
                    <span>{{dps_stats_archive.skillspeedDPSImprovement.toFixed(2)}}%</span>
                </td>
            </tr>
            <tr>
                <td class="{{ui.tenacity_archive}}">
                    <span>Tenacity Difference</span> <br />
                    <span>{{dps_stats.tenacity - dps_stats_archive.tenacity}}</span>
                </td>
                <td class="{{ui.tenacity_archive}}">
                    <span>Tenacity</span><br />
                    <span>{{dps_stats_archive.tenacity}}</span>
                </td>
                <td class="{{ui.tenacity_archive}}">
                    <span>Tenacity Delta</span><br />
                    <span>{{dps_stats_archive.tenacityDelta}}</span>
                </td>
                <td class="{{ui_color.info}}">
                    <span>per .1% dps</span><br />
                    <span>{{dps_base.tenacityRatio}}</span>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td class="{{ui.tenacity_archive}}">
                    <span>Tenacity DPS</span><br />
                    <span>{{dps_stats_archive.tenacityDPS.toFixed(2)}}%</span>
                </td>
            </tr>
            <tr>
                <td class="{{ui.total_archive}}">
                    <span>Total Difference</span> <br />
                    <span>{{(dps_stats.totaldps - dps_stats_archive.totaldps).toFixed(2)}}</span>
                </td>
                <td>
                </td>
                <td class="{{ui_color.info}}">
                    <span>Base Stats: {{dps_base.levelBase}}</span> <br />
                    <span>Determination: 340</span>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td class="{{ui.total_archive}}">
                    <span>Total DPS</span><br />
                    <span>{{dps_stats_archive.totaldps.toFixed(2)}}%</span>
                </td>
            </tr>
        </table>
    </div>
</body>
</html>